## Acceptance Criteria
- [ ] Dedicated tab/page for collecting all agent outputs
- [ ] Grid/list toggle for viewing options
- [ ] Cards showing output type icon, title, source agent, timestamp, preview snippet
- [ ] Tap to open full output viewer (markdown renderer, code editor, etc.)
- [ ] Actions: Copy, Share, Save to file, Send to another agent, Delete
- [ ] Filter by agent, type, date range
- [ ] Search within outputs
- [ ] All entities generated using ZFA (Zorphy) with JSON serialization
- [ ] All Clean Architecture layers generated using ZFA generate command
- [ ] State management using ZFA-generated State classes

## Task
Implement the Output Gallery for managing and accessing all agent-generated content.

### Gallery Layout:

**Main Screen:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Output Gallery                     â”‚
â”‚  [Search outputs...          ] ğŸ”   â”‚
â”‚  [Grid] [List]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Filter: [All Types â–¼] [All Agents â–¼] [Any Date â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ ğŸ“„      â”‚ â”‚ ğŸ“§      â”‚ â”‚ ğŸ’»      â”‚
â”‚  â”‚ Report  â”‚ â”‚ Email   â”‚ â”‚ Code    â”‚
â”‚  â”‚ Summary â”‚ â”‚ Draft   â”‚ â”‚ Review  â”‚
â”‚  â”‚         â”‚ â”‚         â”‚ â”‚         â”‚
â”‚  â”‚Research â”‚ â”‚Email    â”‚ â”‚Code     â”‚
â”‚  â”‚Agent    â”‚ â”‚Agent    â”‚ â”‚Helper   â”‚
â”‚  â”‚2h ago   â”‚ â”‚5h ago   â”‚ â”‚1d ago   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ ğŸ“Š      â”‚ â”‚ ğŸ“      â”‚ â”‚ ğŸ“„      â”‚
â”‚  â”‚ Data    â”‚ â”‚ Article â”‚ â”‚ Summary â”‚
â”‚  â”‚ Analysisâ”‚ â”‚ Draft   â”‚ â”‚         â”‚
â”‚  â”‚         â”‚ â”‚         â”‚ â”‚         â”‚
â”‚  â”‚Research â”‚ â”‚General  â”‚ â”‚Research â”‚
â”‚  â”‚Agent    â”‚ â”‚Assistantâ”‚ â”‚Agent    â”‚
â”‚  â”‚2d ago   â”‚ â”‚3d ago   â”‚ â”‚1w ago   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### View Modes:

**Grid View:**
- Card-based layout
- Responsive columns (2-4 depending on screen size)
- Visual preview when possible
- Compact information display

**List View:**
- Row-based layout
- More details visible
- Better for scanning many items
- Quick actions on hover

### Output Card Design:

**Grid Card:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„                     â”‚  â† Output type icon
â”‚                         â”‚
â”‚  Competitor Analysis    â”‚  â† Title (auto-generated or user-named)
â”‚  Summary                â”‚
â”‚                         â”‚
â”‚  Lorem ipsum dolor sit  â”‚  â† Preview snippet
â”‚  amet, consectetur...   â”‚
â”‚                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ” Research Agent      â”‚  â† Source agent
â”‚  Today, 2:45 PM         â”‚  â† Timestamp
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**List Row:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„  Competitor Analysis Summary                                 â”‚
â”‚      Lorem ipsum dolor sit amet, consectetur adipiscing...      â”‚
â”‚      ğŸ” Research Agent  â€¢  Today, 2:45 PM  â€¢  2 pages          â”‚
â”‚                                            [Copy] [Share] [More]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Output Types:

**Type Icons & Categories:**

| Type | Icon | Extension | Viewer |
|------|------|-----------|--------|
| Document | ğŸ“„ | .md, .txt, .doc | Markdown renderer |
| Email | ğŸ“§ | Draft | Email preview |
| Code | ğŸ’» | .js, .py, etc. | Code editor |
| Data | ğŸ“Š | .csv, .json | Table/chart viewer |
| Article | ğŸ“ | .md | Markdown renderer |
| Summary | ğŸ“‹ | .md, .txt | Markdown renderer |
| Image | ğŸ–¼ï¸ | .png, .jpg, .gif | Image viewer |
| PDF | ğŸ“• | .pdf | PDF viewer |
| Presentation | ğŸ“Š | .pptx | Presentation viewer |
| Spreadsheet | ğŸ“ˆ | .xlsx, .csv | Spreadsheet viewer |

### Output Viewer:

**Full Output View:**
When user taps an output card:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Competitor Analysis Summary     â”‚
â”‚                        [Edit] [â‹®]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  # Competitor Analysis              â”‚
â”‚                                     â”‚
â”‚  ## Overview                        â”‚
â”‚  Lorem ipsum dolor sit amet...      â”‚
â”‚                                     â”‚
â”‚  ## Key Findings                    â”‚
â”‚  - Finding 1                        â”‚
â”‚  - Finding 2                        â”‚
â”‚  - Finding 3                        â”‚
â”‚                                     â”‚
â”‚  ## Recommendations                 â”‚
â”‚  1. Recommendation 1                â”‚
â”‚  2. Recommendation 2                â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ 3 attachments                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” Research Agent â€¢ Today, 2:45 PM â”‚
â”‚                                     â”‚
â”‚  [Copy] [Share] [Save] [Send to Agent] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Viewer Features by Type:**

**Markdown/Text:**
- Full markdown rendering
- Syntax highlighting for code blocks
- Table rendering
- Image inline display
- Link navigation
- Table of contents (for long docs)

**Code:**
- Syntax highlighting
- Line numbers
- Copy code button
- Language selector
- Theme options (light/dark)

**Email:**
- Preview of email fields (To, CC, Subject)
- Formatted body
- Attachment previews
- Send options

**Data:**
- Table view with sorting/filtering
- Chart generation options
- Export to different formats
- Statistical summary

**Images:**
- Full-screen view
- Pinch to zoom
- Rotate
- Share/Download

### Output Actions:

**Primary Actions:**
- **Copy** â€” Copy content to clipboard
- **Share** â€” Open share sheet
- **Save** â€” Save to local file system
- **Send to Agent** â€” Forward to another agent for processing

**Secondary Actions (â‹® menu):**
- Rename
- Download
- Open with...
- Move to folder
- Duplicate
- Delete
- View source chat

### Send to Another Agent:

**Flow:**
1. Tap "Send to Agent"
2. Agent picker appears
3. Optional: Add context/message
4. Send
5. Agent receives output as input

**Use Cases:**
- Send summary to Email Agent â†’ Draft email
- Send code to Code Helper â†’ Review/refactor
- Send analysis to Research Agent â†’ Deep dive

### Filtering:

**Filter Options:**

**By Type:**
- All Types
- Documents (ğŸ“„)
- Emails (ğŸ“§)
- Code (ğŸ’»)
- Data (ğŸ“Š)
- Images (ğŸ–¼ï¸)
- Other

**By Agent:**
- All Agents
- [Agent Name 1]
- [Agent Name 2]
- etc.

**By Date:**
- Any Date
- Today
- Yesterday
- This Week
- This Month
- Custom Range

**Filter UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Filter                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Type                               â”‚
â”‚  [x] Documents  [ ] Emails  [x] Codeâ”‚
â”‚                                     â”‚
â”‚  Agent                              â”‚
â”‚  [x] Research Agent                 â”‚
â”‚  [ ] Email Agent                    â”‚
â”‚  [x] Code Helper                    â”‚
â”‚                                     â”‚
â”‚  Date Range                         â”‚
â”‚  From: [2024-01-01]                 â”‚
â”‚  To:   [2024-01-31]                 â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Clear   â”‚  â”‚   Apply   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Search:

**Search Capabilities:**
- Full-text search within output content
- Search by title
- Search by agent name
- Search by date
- Advanced search with filters

**Search UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” [competitor analysis    ]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Results for "competitor analysis"  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„ Competitor Analysis       â”‚   â”‚
â”‚  â”‚ ...competitor analysis for   â”‚   â”‚
â”‚  â”‚ Q4 2024...                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š Market Competitor Data    â”‚   â”‚
â”‚  â”‚ ...analysis of top 5         â”‚   â”‚
â”‚  â”‚ competitors...               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Output Organization:

**Folders (Optional):**
- Create custom folders
- Move outputs between folders
- Default folders: All, Favorites, Recent

**Favorites:**
- Star outputs for quick access
- Favorites filter/tab
- Starred outputs pinned to top

**Tags:**
- Add custom tags to outputs
- Filter by tags
- Tag management

### Metadata:

**Output Metadata:**
```javascript
{
  id: string,
  title: string,
  type: enum,
  content: string,
  sourceAgentId: string,
  sourceChatId: string,
  createdAt: Date,
  updatedAt: Date,
  tags: string[],
  isFavorite: boolean,
  folderId: string | null,
  wordCount: number,
  characterCount: number,
  attachments: Attachment[]
}
```

### State Management:

**Storage:**
- Local storage for quick access
- Cloud sync for cross-device access
- Efficient caching strategy
- Background sync

**Performance:**
- Lazy loading for large content
- Pagination for long lists
- Virtual scrolling
- Thumbnail caching for images

### Empty State:

**No Outputs:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚           ğŸ“„                        â”‚
â”‚                                     â”‚
â”‚     No outputs yet                  â”‚
â”‚                                     â”‚
â”‚  Outputs from your agents will      â”‚
â”‚  appear here. Start a conversation  â”‚
â”‚  with an agent to generate content. â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    Go to Dashboard       â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ZFA Architecture Requirements

### Entity Definition

**Output Entity:**
```bash
zfa entity create -n Output --field "id:String,title:String,type:String,content:String,sourceAgentId:String,sourceChatId:String?,preview:String?,wordCount:int,characterCount:int,tags:List<String>,isFavorite:bool,folderId:String?,attachments:List<Map<String,dynamic>>?,createdAt:DateTime,updatedAt:DateTime" --json
```

**OutputType Enum:**
```bash
zfa entity enum -n OutputType --value document,email,code,data,article,summary,image,pdf
```

### Clean Architecture Generation

```bash
zfa generate Output --methods=get,getList,create,update,delete --data --vpc --state
```

### Implementation Notes

1. **Content Storage**: Store large content in separate storage, reference in entity
2. **Preview Generation**: Auto-generate preview snippet on create
3. **Search**: Full-text search on `title`, `content`, `preview` fields

