## Acceptance Criteria
- [ ] Bell icon in top bar with unread badge count
- [ ] Dropdown (desktop) or full-page (mobile) notification list
- [ ] Notification types: agent completed, error, waiting for approval, workflow finished, scheduled reminder
- [ ] Each notification is tappable â†’ navigates to relevant context
- [ ] Swipe to dismiss, "Mark all read" button
- [ ] Notification preferences per agent (mute, critical only, all)
- [ ] All entities generated using ZFA (Zorphy) with JSON serialization
- [ ] All Clean Architecture layers generated using ZFA generate command
- [ ] State management using ZFA-generated State classes

## Task
Implement the Notification Center for tracking agent activities, errors, and approval requests.

### Notification Icon (Top Bar):

**Design:**
- Bell icon (ğŸ””) in app bar
- Unread badge: Red circle with count
- Badge max display: "99+"
- Animation: Subtle shake when new notification arrives

**Icon States:**
- ğŸ”” â€” No unread notifications
- ğŸ””Â¹ â€” 1 unread notification
- ğŸ””â¹â¹âº â€” 99+ unread notifications

### Notification Center Layout:

**Mobile (Full Page):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Notifications      [Mark all read]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Today                              â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”” Research Agent            â”‚   â”‚
â”‚  â”‚ Finished "competitor analysis"â”‚   â”‚
â”‚  â”‚ 5 minutes ago                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âš ï¸ Email Agent               â”‚   â”‚
â”‚  â”‚ Waiting for approval         â”‚   â”‚
â”‚  â”‚ 10 minutes ago               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  Earlier                            â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âŒ Code Helper               â”‚   â”‚
â”‚  â”‚ Error: API rate limit        â”‚   â”‚
â”‚  â”‚ Yesterday at 3:45 PM         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… Daily Briefing            â”‚   â”‚
â”‚  â”‚ Workflow completed           â”‚   â”‚
â”‚  â”‚ Yesterday at 8:05 AM         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Desktop (Dropdown):**
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Notifications    [Mark all read]   â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  ğŸ”” Research Agent                   â”‚
                    â”‚  Finished "competitor analysis"      â”‚
                    â”‚  5 min ago                     [View]â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  âš ï¸ Email Agent                      â”‚
                    â”‚  Waiting for approval                â”‚
                    â”‚  10 min ago                    [View]â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  âŒ Code Helper                      â”‚
                    â”‚  Error: API rate limit               â”‚
                    â”‚  Yesterday                    [View] â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  âœ… Daily Briefing                   â”‚
                    â”‚  Workflow completed                  â”‚
                    â”‚  Yesterday                    [View] â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚               [See all notifications]â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Notification Types:

**1. Agent Completed (âœ…)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… [Agent Name]                      â”‚
â”‚ Completed task: "[task name]"        â”‚
â”‚ [timestamp]                          â”‚
â”‚                                     â”‚
â”‚ [View Result]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Agent finished a task
- Shows task summary
- Links to result/output

**2. Agent Error (âŒ)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ [Agent Name]                      â”‚
â”‚ Error: [error message]               â”‚
â”‚ [timestamp]                          â”‚
â”‚                                     â”‚
â”‚ [View Details] [Retry]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Agent encountered an error
- Shows error summary
- Links to error details
- Retry option available

**3. Waiting for Approval (âš ï¸)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ [Agent Name]                      â”‚
â”‚ Waiting for your approval            â”‚
â”‚ [timestamp]                          â”‚
â”‚                                     â”‚
â”‚ [Approve Now]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Agent paused for approval
- Urgent styling
- Direct approve action

**4. Workflow Finished (ğŸ”„)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… [Workflow Name]                   â”‚
â”‚ Workflow completed successfully      â”‚
â”‚ Duration: [X minutes]                â”‚
â”‚ [timestamp]                          â”‚
â”‚                                     â”‚
â”‚ [View Results]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Workflow execution complete
- Shows duration
- Links to outputs

**5. Workflow Error (âŒ)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ [Workflow Name]                   â”‚
â”‚ Failed at node: [node name]          â”‚
â”‚ Error: [error message]               â”‚
â”‚ [timestamp]                          â”‚
â”‚                                     â”‚
â”‚ [View Details] [Re-run]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Workflow failed
- Shows which node failed
- Re-run option available

**6. Scheduled Reminder (â°)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â° Reminder                          â”‚
â”‚ [Reminder message]                   â”‚
â”‚ [timestamp]                          â”‚
â”‚                                     â”‚
â”‚ [Dismiss] [Snooze]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Calendar/event reminder
- Snooze option
- Dismiss option

### Notification Actions:

**Swipe Actions (Mobile):**
- Swipe right: Mark as read
- Swipe left: Delete/dismiss

**Tap Action:**
- Tap notification â†’ Navigate to relevant context:
  - Agent completed â†’ Agent chat with result
  - Agent error â†’ Error details screen
  - Approval request â†’ Approval screen
  - Workflow finished â†’ Workflow results
  - Reminder â†’ Event/meeting details

**Long-press (Mobile) / Right-click (Desktop):**
- Mark as read/unread
- Delete
- Mute this type
- View details

### Notification Preferences:

**Per-Agent Settings:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Notification Preferences            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Email Agent                         â”‚
â”‚  â—‹ All notifications                 â”‚
â”‚  â— Critical only (errors, approvals) â”‚
â”‚  â—‹ Mute all                          â”‚
â”‚                                     â”‚
â”‚  Research Agent                      â”‚
â”‚  â— All notifications                 â”‚
â”‚  â—‹ Critical only                     â”‚
â”‚  â—‹ Mute all                          â”‚
â”‚                                     â”‚
â”‚  Code Helper                         â”‚
â”‚  â—‹ All notifications                 â”‚
â”‚  â—‹ Critical only                     â”‚
â”‚  â— Mute all                          â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Global Settings:**
- Push notifications on/off
- Sound on/off
- Vibration on/off
- Quiet hours (don't disturb)
- Notification grouping

### Push Notifications:

**Platform Integration:**
- iOS: APNS (Apple Push Notification Service)
- Android: FCM (Firebase Cloud Messaging)
- macOS: Native notifications
- Windows: Windows Notification Service
- Web: Web Push API

**Push Notification Content:**
- Title: Agent/Workflow name
- Body: Action summary
- Icon: App icon or agent avatar
- Badge: Update app badge count
- Sound: Default or custom

**Deep Links:**
- Tapping push notification opens app
- Navigates directly to relevant context
- Preserves notification state

### Notification Grouping:

**Smart Grouping:**
- Group by agent
- Group by type
- Group by time (today, earlier)
- Collapsible groups

**Group Display:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Email Agent (3)                â–¼   â”‚
â”‚  â”œâ”€ âš ï¸ Waiting for approval         â”‚
â”‚  â”œâ”€ âœ… Email sent                   â”‚
â”‚  â””â”€ âœ… Draft created                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Research Agent (1)             â–¼   â”‚
â”‚  â””â”€ âœ… Analysis complete            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Notification Sound & Haptics:

**Sound Options:**
- Default system sound
- Custom sounds per notification type
- Silent mode option

**Haptic Feedback (Mobile):**
- Light: Normal notification
- Medium: Approval required
- Heavy: Error/Urgent

### Badge Management:

**App Icon Badge:**
- Shows unread count
- Updates in real-time
- Clears when all notifications read
- Per-platform handling

**In-App Badges:**
- Notification icon badge
- Agent card badges
- Workflow status badges

### State Management:

**Notification Data:**
```javascript
{
  id: string,
  type: enum, // completed, error, approval, workflow, reminder
  title: string,
  message: string,
  agentId: string | null,
  workflowId: string | null,
  timestamp: Date,
  read: boolean,
  actions: NotificationAction[],
  deepLink: string
}
```

**Storage:**
- Local storage for recent notifications
- Sync with backend for cross-device
- Retention: 30 days by default
- Clear all option

### Quiet Hours:

**Do Not Disturb:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Quiet Hours                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Toggle] Enable quiet hours        â”‚
â”‚                                     â”‚
â”‚  From: [10:00 PM]                   â”‚
â”‚  To:   [7:00 AM]                    â”‚
â”‚                                     â”‚
â”‚  â˜‘ Allow critical notifications     â”‚
â”‚  â˜ Allow approval requests          â”‚
â”‚  â˜ Allow scheduled reminders        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**During Quiet Hours:**
- No push notifications
- No sounds
- Notifications still appear in center
- Badge updates paused
- Critical notifications can override

## ZFA Architecture Requirements

### Entity Definition

**Notification Entity:**
```bash
zfa entity create -n Notification --field "id:String,type:String,title:String,message:String,agentId:String?,workflowId:String?,deepLink:String?,isRead:bool,createdAt:DateTime" --json
```

**NotificationType Enum:**
```bash
zfa entity enum -n NotificationType --value agent_completed,agent_error,approval_required,workflow_finished,scheduled_reminder
```

**NotificationPreferences Entity:**
```bash
zfa entity create -n NotificationPreferences --field "id:String,agentId:String,level:String,pushEnabled:bool,soundEnabled:bool" --json
```

### Clean Architecture Generation

```bash
zfa generate Notification --methods=get,getList,update,delete --data --vpc --state
zfa generate NotificationPreferences --methods=get,getList,update --data --vpc --state
```

### Implementation Notes

1. **Badge Count**: Query `Notification` with `isRead: false`
2. **Preferences**: Filter notifications based on `NotificationPreferences.level`
3. **Deep Links**: Store navigation path for tap action

