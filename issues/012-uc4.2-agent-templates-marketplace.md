## Acceptance Criteria
- [ ] Browse screen with curated agent templates
- [ ] Categories: Productivity, Research, Development, Creative, Communication, Finance
- [ ] Search and filter by category/tag
- [ ] Template preview with description, system prompt, required tools
- [ ] "Use This Template" pre-fills agent creation form
- [ ] Community tab for user-submitted templates
- [ ] "Share My Agent" exports config or publishes to community
- [ ] All entities generated using ZFA (Zorphy) with JSON serialization
- [ ] All Clean Architecture layers generated using ZFA generate command
- [ ] State management using ZFA-generated State classes

## Task
Implement the Agent Templates & Marketplace feature for discovering and sharing agent configurations.

### Screen Layout:

**Main Browse Screen:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Templates               ğŸ”   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Curated] [Community]              â”‚  â† Tab switcher
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Category  â”‚ â”‚Category  â”‚        â”‚
â”‚  â”‚chips     â”‚ â”‚chips     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Featured Templates                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Templateâ”‚ â”‚ Templateâ”‚          â”‚
â”‚  â”‚  Card   â”‚ â”‚  Card   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                     â”‚
â”‚  All Templates                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Templateâ”‚ â”‚ Templateâ”‚          â”‚
â”‚  â”‚  Card   â”‚ â”‚  Card   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab Navigation:

**Curated Tab:**
- Official templates from Leblebi team
- High-quality, tested templates
- Regularly updated
- Free to use

**Community Tab:**
- User-submitted templates
- Sorted by: Downloads, Stars, Recent
- Verified badge for trusted creators
- May require review before publishing

### Category Chips:

**Categories:**
- ğŸ“š All
- ğŸš€ Productivity
- ğŸ”¬ Research
- ğŸ’» Development
- ğŸ¨ Creative
- ğŸ’¬ Communication
- ğŸ’° Finance
- ğŸ¥ Health
- ğŸ“Š Data Analysis
- ğŸ“ Education

**Interaction:**
- Horizontal scrollable row
- Tap to filter templates
- Active chip highlighted
- Count badge per category

### Template Card:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤–                             â”‚
â”‚                                 â”‚
â”‚  Email Manager                  â”‚  â† Template name
â”‚  by @username                   â”‚  â† Author
â”‚                                 â”‚
â”‚  Triage, draft, and send        â”‚  â† Description
â”‚  emails automatically           â”‚
â”‚                                 â”‚
â”‚  â­ 4.8  ğŸ“¥ 2.3k downloads      â”‚  â† Stats
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     Use Template         â”‚   â”‚  â† CTA
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Card Components:**
1. **Icon/Avatar** â€” Template icon (emoji or image)
2. **Name** â€” Template title
3. **Author** â€” Creator name or "Official"
4. **Description** â€” 1-2 line summary
5. **Rating** â€” Star rating (community templates)
6. **Downloads** â€” Download count
7. **Use Template Button** â€” Primary CTA

### Template Preview Screen:

When user taps template card or "Use Template":

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Email Manager                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ğŸ¤– Email Manager                   â”‚
â”‚  by @username                       â”‚
â”‚  â­ 4.8 (124 reviews)               â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                     â”‚
â”‚  Description                        â”‚
â”‚  This agent helps you manage your   â”‚
â”‚  inbox by automatically triaging    â”‚
â”‚  emails, drafting responses, and    â”‚
â”‚  sending approved emails.           â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                     â”‚
â”‚  System Prompt                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ You are an email management  â”‚   â”‚
â”‚  â”‚ assistant. Your job is to... â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚ [Read-only, scrollable]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                     â”‚
â”‚  Required Tools                     â”‚
â”‚  ğŸŒ Web Search   ğŸ“§ Email Access    â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    Use This Template     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Preview Sections:**

1. **Header:**
   - Template icon
   - Name
   - Author (tap to see author profile)
   - Rating and review count

2. **Description:**
   - Full description of what the agent does
   - Use cases
   - Tips for best results

3. **System Prompt (Read-only):**
   - Scrollable view of the system prompt
   - User can see exactly how agent is configured
   - Copy button for reference

4. **Required Tools:**
   - List of tools this template uses
   - Status indicator if user hasn't configured them
   - Tap to configure missing tools

5. **Configuration Preview:**
   - Model selection
   - Temperature setting
   - Memory settings

6. **Reviews (Community Templates):**
   - User reviews and ratings
   - Sort by: Most helpful, Recent

7. **Use This Template Button:**
   - Opens agent creation form (UC-1.2)
   - Pre-fills all template settings
   - User can customize before saving

### Search & Filter:

**Search Bar:**
- Full-text search across template names and descriptions
- Real-time results as you type
- Recent searches saved

**Filter Options:**
- Category (chips)
- Rating (4+, 3+, any)
- Downloads (most popular)
- Required tools (filter by tools I have)
- Model compatibility

**Sort Options:**
- Relevance (search)
- Most downloaded
- Highest rated
- Most recent
- Alphabetical

### Share My Agent:

**Entry Points:**
- Agent card context menu â†’ "Share"
- Agent Profile Editor â†’ "Share Agent" button

**Share Options:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Share Agent                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“‹ Copy as JSON             â”‚   â”‚
â”‚  â”‚  Copy config to clipboard    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”— Generate Shareable Link  â”‚   â”‚
â”‚  â”‚  Create a link to share      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“± Export as QR Code        â”‚   â”‚
â”‚  â”‚  Scan to import on mobile    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸŒ Publish to Community     â”‚   â”‚
â”‚  â”‚  Share with other users      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Export Exclusions:**
- API keys (never exported)
- Personal data
- Conversation history
- Sensitive settings

### Publish to Community:

**Publishing Flow:**
1. User selects "Publish to Community"
2. Form appears:
   - Template name (default: agent name)
   - Description (required)
   - Category selection
   - Tags (optional)
   - Author name/username
   - License (MIT, Custom, etc.)
3. Preview of how template will appear
4. "Submit for Review" button
5. Template enters review queue
6. Approved templates appear in Community tab

**Community Guidelines:**
- No malicious or harmful agents
- Clear description required
- Must not include personal data
- Review process (24-48 hours)

### Import Template:

**Import Methods:**

1. **From JSON:**
   - Paste JSON in import field
   - Validates structure
   - Pre-fills creation form

2. **From Link:**
   - Open shared link in browser
   - Deep-links to app
   - Opens template preview

3. **From QR Code:**
   - Scan QR with camera
   - Parses template data
   - Opens template preview

### State Management:

**Template Data:**
- Cache curated templates locally
- Refresh on app launch or pull-to-refresh
- Store downloaded templates for offline use

**User Data:**
- Track downloaded/used templates
- Track user's published templates
- Store review/rating history

### Featured Section:

**Featured Templates:**
- Highlighted by Leblebi team
- Rotating selection
- Seasonal themes
- New additions badge

**Personalized Recommendations:**
- Based on user's agents
- Based on usage patterns
- "Because you use [Agent Name]"

### Analytics (for publishers):
- View count
- Download count
- Rating breakdown
- Review count

## ZFA Architecture Requirements

### Entity Definition

**Template Entity:**
```bash
zfa entity create -n Template --field "id:String,name:String,description:String,icon:String,category:String,tags:List<String>,systemPrompt:String,requiredTools:List<String>,model:String?,temperature:double?,authorId:String?,authorName:String?,rating:double,downloadCount:int,isCurated:bool,createdAt:DateTime" --json
```

**TemplateReview Entity:**
```bash
zfa entity create -n TemplateReview --field "id:String,templateId:String,userId:String,userName:String,rating:double,comment:String?,createdAt:DateTime" --json
```

### Clean Architecture Generation

```bash
zfa generate Template --methods=get,getList,create --data --vpc --state
zfa generate TemplateReview --methods=get,getList,create --data --vpc --state
```

### Implementation Notes

1. **Curated vs Community**: Filter by `isCurated` field
2. **Rating Calculation**: Average of all reviews for template
3. **Download Tracking**: Increment `downloadCount` on "Use Template"

