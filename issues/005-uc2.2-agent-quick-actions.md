## Acceptance Criteria
- [ ] Tap agent card opens chat with that agent
- [ ] Long-press agent card shows context menu with: Duplicate, Edit Configuration, Pause/Resume, View Logs, Share, Delete
- [ ] Drag agent card onto another agent prompts to create workflow linking them
- [ ] All actions have confirmation dialogs where appropriate
- [ ] Actions execute correctly and update UI immediately
- [ ] All entities generated using ZFA (Zorphy) with JSON serialization
- [ ] All Clean Architecture layers generated using ZFA generate command
- [ ] State management using ZFA-generated State classes

## Task
Implement quick actions for agent cards on the dashboard.

### Tap Action:
- Single tap on agent card ‚Üí Navigate to chat view (UC-3.1)
- Pass agent ID to chat screen
- Animation: Card scales down slightly, then transitions to full-screen chat

### Long-Press Context Menu:
On long-press (or right-click on desktop), show a context menu with the following options:

**Menu Items:**

1. **Duplicate**
   - Icon: üìã or copy icon
   - Creates a copy of the agent with name "Agent Name (Copy)"
   - Copies all configuration except: ID, chat history
   - Confirmation: None (immediate action, can undo via snackbar)

2. **Edit Configuration**
   - Icon: ‚úèÔ∏è or edit/pencil icon
   - Opens Agent Profile Editor (UC-4.1)
   - Pass agent ID to editor

3. **Pause / Resume**
   - Icon: ‚è∏Ô∏è (Pause) or ‚ñ∂Ô∏è (Resume)
   - Toggles agent's active state
   - Paused agents show "Paused" status pill
   - Paused agents cannot receive new tasks
   - Active background tasks continue until completion, then pause
   - Toggle label changes based on current state

4. **View Logs**
   - Icon: üìú or document/log icon
   - Opens log viewer screen
   - Shows timestamped activity history for this agent
   - Filter by: date range, log level (info, warning, error)

5. **Share**
   - Icon: üîó or share icon
   - Opens share sheet with options:
     - **Copy as JSON** ‚Äî Copies agent config to clipboard (excludes API keys)
     - **Generate shareable link** ‚Äî If community hub enabled
     - **Export as QR code** ‚Äî For mobile-to-mobile sharing
   - See UC-9.1 for full share implementation

6. **Delete**
   - Icon: üóëÔ∏è or trash icon
   - Red/destructive color
   - Shows confirmation dialog:
     - Title: "Delete Agent?"
     - Message: "This will permanently delete '[Agent Name]' and all its chat history. This action cannot be undone."
     - Buttons: "Cancel" / "Delete" (red)

### Context Menu Design:
- Appears above or below the card (based on screen position)
- Rounded corners, shadow
- Each item has icon + text
- Destructive action (Delete) separated by divider
- Tap outside to dismiss

### Drag-and-Drop Workflow Creation:
When user drags an agent card onto another agent card:

1. Visual feedback during drag:
   - Dragged card lifts with shadow
   - Drop target highlights with glow/border
   - Other cards fade slightly

2. On drop:
   - Show dialog: "Create a workflow linking [Agent A] and [Agent B]?"
   - Options:
     - "Sequential" ‚Äî A ‚Üí B (A's output feeds to B)
     - "Parallel" ‚Äî A and B run together
     - "Cancel"
   - On selection ‚Üí Opens workflow builder (UC-5.1) with pre-connected nodes

3. Animation:
   - Smooth drag gesture following finger/cursor
   - Snap back on cancel
   - Morph into workflow node on confirm

### State Management:
- Track paused/resumed state per agent
- Track duplicate operations (for undo)
- Track deletion operations (for undo within session)
- Update agent list immediately on any action (optimistic UI)

### Error Handling:
- If duplicate fails ‚Üí Show error snackbar
- If delete fails ‚Üí Restore agent, show error
- If share fails ‚Üí Show error with retry option

### Haptic Feedback (Mobile):
- Light impact on context menu open
- Medium impact on destructive action confirm
- Light impact on successful drop

### Keyboard Shortcuts (Desktop):
- Arrow keys to navigate menu
- Enter to select
- Escape to dismiss
- `Cmd+D` for duplicate
- `Cmd+E` for edit
- `Delete` key for delete (with confirmation)

## ZFA Architecture Requirements

### Entity Definition

**AgentLog Entity:**
```bash
zfa entity create -n AgentLog --field "id:String,agentId:String,action:String,details:Map<String,dynamic>?,timestamp:DateTime,level:String" --json
```

### Clean Architecture Generation

Agent (from UC-1.2):
```bash
zfa generate Agent --methods=get,getList,create,update,delete --data --vpc --state
```

Agent logs:
```bash
zfa generate AgentLog --methods=get,getList --data --vpc --state
```

### Implementation Notes

1. **Duplicate Agent**: Use `CreateAgentUseCase` with existing agent's config (new ID)
2. **Pause/Resume**: Update `Agent.status` via `UpdateAgentUseCase`
3. **Delete**: Use `DeleteAgentUseCase` with confirmation
4. **Logs**: Query `AgentLog` filtered by `agentId`

