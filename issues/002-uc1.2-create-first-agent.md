## Acceptance Criteria
- [ ] Guided bottom-sheet appears after key setup completion
- [ ] Display starter templates as cards with illustration and one-line description
- [ ] Templates include: General Assistant, Research Agent, Email Manager, Calendar Agent, Code Helper, Custom
- [ ] Tapping a template creates an agent on home with default avatar and name
- [ ] Agent name is editable inline immediately after creation
- [ ] All entities generated using ZFA (Zorphy) with JSON serialization
- [ ] All Clean Architecture layers generated using ZFA generate command
- [ ] State management using ZFA-generated State classes

## Task
Implement the "Create Your First Agent" guided flow as a bottom-sheet that appears after API key setup.

### Bottom-Sheet Layout:
- Title: "Create your first agent"
- Subtitle: "Pick a template to get started"
- Horizontally scrollable or paginated card carousel

### Starter Templates:
Each template displayed as a card with:

1. **General Assistant**
   - Illustration: ğŸ¤– or generic assistant icon
   - Description: "Everyday tasks, questions, and conversations"

2. **Research Agent**
   - Illustration: ğŸ” or research/magnifying glass icon
   - Description: "Web search, summarize, and compare information"

3. **Email Manager**
   - Illustration: ğŸ“§ or email/envelope icon
   - Description: "Triage, draft, and reply to emails"

4. **Calendar Agent**
   - Illustration: ğŸ“… or calendar icon
   - Description: "Schedule, remind, and block time"

5. **Code Helper**
   - Illustration: ğŸ’» or code icon
   - Description: "Explain, review, and generate code"

6. **Custom**
   - Illustration: âœ¨ or blank canvas icon
   - Description: "Start from scratch with a blank canvas"

### Card Design:
- Rounded corners, subtle shadow
- Illustration/icon at top (large, centered)
- Template name (bold)
- One-line description (gray text)
- Tap animation (scale down slightly, then pop back)

### Interaction Flow:
1. User taps a template card
2. Bottom-sheet dismisses with animation
3. Agent is created with:
   - Default avatar (matching template illustration)
   - Default name (e.g., "General Assistant", "Research Agent")
   - Pre-configured system prompt (hidden from user at this stage)
   - Pre-enabled tools/skills relevant to template
4. Agent appears on home dashboard
5. Name field is in edit mode immediately (keyboard shows, cursor at end)
6. User can rename or tap away to accept default name

### Template Pre-configuration:

**General Assistant:**
- Model: Default provider's default model
- System prompt: "You are a helpful assistant..."
- Tools: None required by default

**Research Agent:**
- Model: Default provider's best model for research
- System prompt: "You are a research assistant skilled at finding, analyzing, and summarizing information..."
- Tools: Web search enabled

**Email Manager:**
- Model: Default provider's default model
- System prompt: "You are an email management assistant..."
- Tools: Email access enabled (requires additional permission setup)

**Calendar Agent:**
- Model: Default provider's default model
- System prompt: "You are a calendar and scheduling assistant..."
- Tools: Calendar access enabled (requires additional permission setup)

**Code Helper:**
- Model: Default provider's code-capable model
- System prompt: "You are a coding assistant skilled at explaining, reviewing, and generating code..."
- Tools: Code execution enabled (optional)

**Custom:**
- Model: Default provider's default model
- System prompt: Empty (user will configure)
- Tools: None enabled

### State Management:
- Track created agents list
- Each agent has: id, name, avatar, template source, configuration
- First agent created triggers navigation to UC-1.3 (Quick Tour)

### Edge Cases:
- If user dismisses bottom-sheet without selecting â†’ show card on dashboard "Create your first agent" as prompt
- If in explore mode â†’ templates still shown but grayed out with "Add API key to create agents" message

## ZFA Architecture Requirements

### Entity Definition

**Agent Entity:**
```bash
zfa entity create -n Agent --field "id:String,name:String,avatar:String?,description:String?,status:String,systemPrompt:String,temperature:double,maxTokens:int,providerId:String,model:String,tools:List<String>,permissions:Map<String,dynamic>,memory:Map<String,dynamic>,templateSource:String?,createdAt:DateTime,updatedAt:DateTime" --json
```

**AgentStatus Enum:**
```bash
zfa entity enum -n AgentStatus --value idle,working,waiting,error,paused
```

**AgentTemplate Entity:**
```bash
zfa entity create -n AgentTemplate --field "id:String,name:String,description:String,icon:String,systemPrompt:String,tools:List<String>,defaultModel:String?,category:String,isDefault:bool" --json
```

### Clean Architecture Generation

Generate full Clean Architecture for Agent:
```bash
zfa generate Agent --methods=get,getList,create,update,delete --data --vpc --state
```

Generate templates (read-only):
```bash
zfa generate AgentTemplate --methods=get,getList --data --vpc --state
```

### Generated File Structure

```
lib/src/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”‚   â””â”€â”€ agent.dart
â”‚   â”‚   â”œâ”€â”€ agent_template/
â”‚   â”‚   â”‚   â””â”€â”€ agent_template.dart
â”‚   â”‚   â””â”€â”€ enums/
â”‚   â”‚       â””â”€â”€ agent_status.dart
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ agent_repository.dart
â”‚   â”‚   â””â”€â”€ agent_template_repository.dart
â”‚   â””â”€â”€ usecases/
â”‚       â”œâ”€â”€ agent/
â”‚       â”‚   â”œâ”€â”€ get_agent_usecase.dart
â”‚       â”‚   â”œâ”€â”€ get_agent_list_usecase.dart
â”‚       â”‚   â”œâ”€â”€ create_agent_usecase.dart
â”‚       â”‚   â”œâ”€â”€ update_agent_usecase.dart
â”‚       â”‚   â””â”€â”€ delete_agent_usecase.dart
â”‚       â””â”€â”€ agent_template/
â”‚           â”œâ”€â”€ get_agent_template_usecase.dart
â”‚           â””â”€â”€ get_agent_template_list_usecase.dart
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ data_agent_repository.dart
â”‚   â”‚   â””â”€â”€ data_agent_template_repository.dart
â”‚   â””â”€â”€ data_sources/
â”‚       â”œâ”€â”€ agent/
â”‚       â”‚   â”œâ”€â”€ agent_data_source.dart
â”‚       â”‚   â””â”€â”€ agent_remote_data_source.dart
â”‚       â””â”€â”€ agent_template/
â”‚           â”œâ”€â”€ agent_template_data_source.dart
â”‚           â””â”€â”€ agent_template_local_data_source.dart  # Bundled templates
â””â”€â”€ presentation/
    â””â”€â”€ pages/
        â”œâ”€â”€ agent/
        â”‚   â”œâ”€â”€ agent_view.dart
        â”‚   â”œâ”€â”€ agent_controller.dart
        â”‚   â”œâ”€â”€ agent_presenter.dart
        â”‚   â””â”€â”€ agent_state.dart
        â””â”€â”€ agent_template/
            â”œâ”€â”€ agent_template_view.dart
            â”œâ”€â”€ agent_template_controller.dart
            â”œâ”€â”€ agent_template_presenter.dart
            â””â”€â”€ agent_template_state.dart
```

### State Classes

ZFA-generated `AgentState`:
```dart
class AgentState {
  final AppFailure? error;
  final List<Agent> agentList;
  final Agent? agent;
  final bool isGetting;
  final bool isGettingList;
  final bool isCreating;
  final bool isUpdating;
  final bool isDeleting;
  
  bool get isLoading => isGetting || isGettingList || isCreating || isUpdating || isDeleting;
  bool get hasError => error != null;
}
```

### Implementation Notes

1. **Template Bundling**: `AgentTemplateLocalDataSource` should return bundled default templates:
```dart
class AgentTemplateLocalDataSource implements AgentTemplateDataSource {
  @override
  Future<List<AgentTemplate>> getList(ListQueryParams<AgentTemplate> params) async {
    return [
      AgentTemplate(
        id: 'general-assistant',
        name: 'General Assistant',
        description: 'Everyday tasks, questions, and conversations',
        icon: 'ğŸ¤–',
        systemPrompt: 'You are a helpful assistant...',
        tools: [],
        category: 'general',
        isDefault: true,
      ),
      // ... other templates
    ];
  }
}
```

2. **Create from Template**: When creating agent from template, copy template config:
```dart
Future<Agent> createFromTemplate(String templateId) async {
  final template = await getTemplate(templateId);
  return Agent(
    name: template.name,
    avatar: template.icon,
    systemPrompt: template.systemPrompt,
    tools: template.tools,
    templateSource: templateId,
    // ... other defaults
  );
}
```

3. **Inline Editing**: After creation, set `isEditing: true` in local state for inline name edit.
