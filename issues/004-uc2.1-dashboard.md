## Acceptance Criteria
- [ ] Global search/command bar at top (always accessible)
- [ ] Agent cards displayed in responsive grid (2-col mobile, 3-col tablet, sidebar+panel desktop)
- [ ] Each agent card shows: avatar, name, status pill, last activity timestamp, unread badge
- [ ] Floating action button for "New Agent" or "New Workflow"
- [ ] Bottom nav (mobile) / sidebar (desktop): Home, Chat, Workflows, Settings
- [ ] All entities generated using ZFA (Zorphy) with JSON serialization
- [ ] All Clean Architecture layers generated using ZFA generate command
- [ ] State management using ZFA-generated State classes

## Task
Implement the main dashboard/home screen that serves as the command center for the Leblebi app.

### Layout Structure:

**Mobile (Portrait):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Search/Command Bar      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚Agentâ”‚  â”‚Agentâ”‚          â”‚
â”‚  â”‚  1  â”‚  â”‚  2  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚Agentâ”‚  â”‚Agentâ”‚          â”‚
â”‚  â”‚  3  â”‚  â”‚  4  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                             â”‚
â”‚           âŠ• FAB             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ     ğŸ’¬    ğŸ”„    âš™ï¸        â”‚
â”‚Home  Chat  Work  Settings   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tablet (Landscape):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Search/Command Bar                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚Agentâ”‚  â”‚Agentâ”‚  â”‚Agentâ”‚                      â”‚
â”‚  â”‚  1  â”‚  â”‚  2  â”‚  â”‚  3  â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚Agentâ”‚  â”‚Agentâ”‚  â”‚Agentâ”‚                      â”‚
â”‚  â”‚  4  â”‚  â”‚  5  â”‚  â”‚  6  â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                  â”‚
â”‚                      âŠ• FAB                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ  Home    ğŸ’¬ Chat    ğŸ”„ Workflows    âš™ï¸ Settings â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Desktop:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  Home â”‚  ğŸ” Search/Command Bar                â”‚
â”‚ ğŸ’¬ Chat â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”„ Work â”‚                                       â”‚
â”‚ âš™ï¸ Sett â”‚  Agent List (sidebar style)           â”‚
â”‚         â”‚  - Agent 1   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚         â”‚  - Agent 2   â”‚                     â”‚  â”‚
â”‚         â”‚  - Agent 3   â”‚  Selected Agent     â”‚  â”‚
â”‚         â”‚  - Agent 4   â”‚  Detail Panel       â”‚  â”‚
â”‚         â”‚              â”‚                     â”‚  â”‚
â”‚         â”‚  âŠ• New       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Command Bar:
- Always visible at top
- Placeholder: "Search agents, workflows, or type a command..."
- Pull-down gesture to expand (mobile)
- `Cmd+K` shortcut (desktop)
- Auto-complete suggestions:
  - Recent commands
  - Agent names (prefix `@`)
  - Workflow names (prefix `/run`)
  - Actions: `/new agent`, `/new workflow`, `/settings`, `/keys`

### Agent Card Components:
Each agent card displays:

1. **Avatar**
   - Customizable: emoji, icon, or uploaded image
   - Circular with subtle border/shadow
   - Size: 48-64px

2. **Name**
   - Agent's display name
   - Single line, truncated with ellipsis if too long
   - Bold text

3. **Status Pill**
   - Small badge below or beside name
   - States:
     - `Idle` â€” gray/default
     - `Working...` â€” blue with subtle pulse animation
     - `Waiting for input` â€” amber/yellow
     - `Error` â€” red

4. **Last Activity Timestamp**
   - Relative time: "2 min ago", "1 hour ago", "Yesterday"
   - Small, gray text

5. **Unread Output Badge**
   - Red circular badge with count
   - Positioned at top-right of card
   - Hidden when count is 0

### Card Interaction:
- Tap â†’ Opens chat with that agent (UC-3.1)
- Long-press â†’ Context menu (UC-2.2)
- Drag â†’ Rearrange order (with haptic feedback)

### Floating Action Button (FAB):
- Positioned at bottom-right (above nav bar)
- âŠ• icon
- Tap â†’ Show options:
  - "New Agent"
  - "New Workflow"
- Animated entrance when scrolling up

### Navigation:
**Mobile Bottom Nav:**
- Home (dashboard icon) â€” selected state
- Chat (speech bubble icon)
- Workflows (flow/network icon)
- Settings (gear icon)

**Desktop Sidebar:**
- Collapsible sections
- Home â€” expands to show dashboard options
- Chat â€” shows recent chats
- Workflows â€” shows recent workflows
- Settings â€” expands to show settings categories

### Empty State:
If no agents exist:
- Centered illustration
- "Create your first agent" message
- CTA button that opens UC-1.2 flow

### State Management:
- Track agents list with all metadata
- Track each agent's status
- Track unread counts per agent
- Track last activity per agent
- Persist grid order (user can rearrange)

### Performance:
- Lazy load agent cards (pagination for large lists)
- Cache agent status updates
- Smooth scrolling (60fps)

## ZFA Architecture Requirements

### Entity Definition

**Agent Entity** (already defined in UC-1.2):
```bash
zfa entity create -n Agent --field "id:String,name:String,avatar:String?,description:String?,status:String,systemPrompt:String,temperature:double,maxTokens:int,providerId:String,model:String,tools:List<String>,permissions:Map<String,dynamic>,memory:Map<String,dynamic>,templateSource:String?,createdAt:DateTime,updatedAt:DateTime" --json
```

**DashboardPreferences Entity:**
```bash
zfa entity create -n DashboardPreferences --field "id:String,agentOrder:List<String>,viewMode:String,showActivityFeed:bool,gridColumns:int" --json
```

### Clean Architecture Generation

Agent generation (from UC-1.2):
```bash
zfa generate Agent --methods=get,getList,create,update,delete --data --vpc --state
```

Dashboard preferences:
```bash
zfa generate DashboardPreferences --methods=get,update --data --vpc --state
```

### Generated State for Dashboard

```dart
class AgentState {
  final AppFailure? error;
  final List<Agent> agentList;
  final Agent? agent;
  final bool isGetting;
  final bool isGettingList;
  final bool isCreating;
  final bool isUpdating;
  final bool isDeleting;
  
  // Computed properties
  bool get isLoading => isGetting || isGettingList || isCreating || isUpdating || isDeleting;
  bool get hasError => error != null;
  List<Agent> get sortedAgents => /* apply order from preferences */;
  int get unreadTotal => agentList.fold(0, (sum, a) => sum + (a.unreadCount ?? 0));
}
```

### Implementation Notes

1. **Grid Order**: Store agent IDs order in `DashboardPreferences.agentOrder`
2. **Status Updates**: Use WebSocket or polling to update agent status in real-time
3. **Pagination**: Use `ListQueryParams` with pagination for large agent lists
