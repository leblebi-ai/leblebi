## Acceptance Criteria
- [ ] Pre-built workflows accessible from "New Workflow" screen
- [ ] Templates include: Email Triage, Daily Briefing, Code Review, Research Pipeline
- [ ] Each template shows visual preview of workflow graph
- [ ] "Use Template" opens builder with pre-connected nodes
- [ ] User can customize template before saving
- [ ] All entities generated using ZFA (Zorphy) with JSON serialization
- [ ] All Clean Architecture layers generated using ZFA generate command
- [ ] State management using ZFA-generated State classes

## Task
Implement Workflow Templates for quick setup of common automation patterns.

### Template Browser Screen:

**Location:** Accessible from Dashboard FAB â†’ "New Workflow" â†’ "Use Template" or Workflow list â†’ "Templates"

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Workflow Templates              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Search templates...]         ğŸ”   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Categories                         â”‚
â”‚  [All] [Email] [Research] [Code]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“§ Email Triage              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ T â”‚â”€â”€â–¶â”‚ A â”‚â”€â”€â–¶â”‚ O â”‚       â”‚ â”‚  â† Visual preview
â”‚  â”‚  â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚  Automatically triage emails, â”‚ â”‚
â”‚  â”‚  flag important ones, draft   â”‚ â”‚
â”‚  â”‚  replies for approval.        â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚  [Use Template]               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸŒ… Daily Briefing            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ S â”‚â”€â”€â–¶â”‚ M â”‚â”€â”€â–¶â”‚ O â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚  Get morning briefing with    â”‚ â”‚
â”‚  â”‚  news, calendar, and emails.  â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚  [Use Template]               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Template Definitions:

**1. Email Triage Workflow**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Email   â”‚    â”‚   Classifier â”‚    â”‚    Draft     â”‚    â”‚  Human   â”‚    â”‚   Send   â”‚
â”‚ Trigger  â”‚â”€â”€â”€â–¶â”‚    Agent     â”‚â”€â”€â”€â–¶â”‚    Replies   â”‚â”€â”€â”€â–¶â”‚Approval  â”‚â”€â”€â”€â–¶â”‚  Output  â”‚
â”‚          â”‚    â”‚              â”‚    â”‚    Agent     â”‚    â”‚   Node   â”‚    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Flow Description:**
1. **Email Trigger** â€” Fires when new email arrives in inbox
2. **Classifier Agent** â€” Analyzes email, assigns priority/category
3. **Draft Replies Agent** â€” Generates reply drafts for important emails
4. **Human Approval** â€” Waits for user to approve/reject/edit drafts
5. **Send Output** â€” Sends approved replies

**Configuration Options:**
- Email folders to watch
- Priority rules
- Auto-reply rules
- Approval requirements

**2. Daily Briefing Workflow**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Schedule  â”‚    â”‚    News      â”‚
â”‚ Trigger  â”‚â”€â”€â”€â–¶â”‚    Agent     â”‚â”€â”€â”€â”
â”‚ (8 AM)   â”‚    â”‚              â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–¶â”‚  Merge   â”‚â”€â”€â”€â–¶â”‚   Push   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚ Transformâ”‚    â”‚Notification
â”‚              â”‚  Calendar    â”‚    â”‚    â”‚          â”‚    â”‚  Output  â”‚
â”‚              â”‚    Agent     â”‚â”€â”€â”€â”â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚              â”‚              â”‚  â”‚â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚                                â”‚â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚              â”‚   Email      â”‚  â”‚â”‚
â”‚              â”‚   Agent      â”‚â”€â”€â”˜â”‚
â”‚              â”‚              â”‚   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Flow Description:**
1. **Scheduled Trigger** â€” Runs every morning at 8 AM
2. **News Agent** â€” Fetches top headlines and summarizes
3. **Calendar Agent** â€” Gets today's events and meetings
4. **Email Agent** â€” Summarizes overnight emails
5. **Merge Transform** â€” Combines all summaries into one briefing
6. **Push Notification** â€” Sends briefing to user

**Configuration Options:**
- Schedule time
- News sources
- Calendar selection
- Email folders to include
- Notification preferences

**3. Code Review Workflow**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File    â”‚    â”‚    Code      â”‚    â”‚   Summary    â”‚    â”‚   Chat   â”‚
â”‚ Change   â”‚â”€â”€â”€â–¶â”‚   Review     â”‚â”€â”€â”€â–¶â”‚    Agent     â”‚â”€â”€â”€â–¶â”‚  Output  â”‚
â”‚ Trigger  â”‚    â”‚    Agent     â”‚    â”‚              â”‚    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Flow Description:**
1. **File Change Trigger** â€” Fires when file is saved/committed
2. **Code Review Agent** â€” Analyzes code for issues, suggests improvements
3. **Summary Agent** â€” Creates readable summary of review
4. **Chat Output** â€” Posts review to chat for discussion

**Configuration Options:**
- File patterns to watch
- Review depth (quick, thorough)
- Focus areas (security, performance, style)
- Output destination

**4. Research Pipeline Workflow**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manual   â”‚    â”‚   Search     â”‚    â”‚   Summarize  â”‚    â”‚  Fact-check  â”‚    â”‚  File    â”‚
â”‚ Trigger  â”‚â”€â”€â”€â–¶â”‚    Agent     â”‚â”€â”€â”€â–¶â”‚    Agent     â”‚â”€â”€â”€â–¶â”‚    Agent     â”‚â”€â”€â”€â–¶â”‚  Output  â”‚
â”‚          â”‚    â”‚              â”‚    â”‚              â”‚    â”‚              â”‚    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Flow Description:**
1. **Manual Trigger** â€” User initiates with topic input
2. **Search Agent** â€” Searches web for relevant sources
3. **Summarize Agent** â€” Creates summary from sources
4. **Fact-check Agent** â€” Verifies claims and adds citations
5. **File Output** â€” Saves research document

**Configuration Options:**
- Search engines to use
- Source credibility thresholds
- Output format (markdown, PDF)
- Storage location

### Template Card Design:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“§ Email Triage                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  [Visual workflow graph preview]            â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”         â”‚
â”‚  â”‚ T â”‚â”€â”€â”€â–¶â”‚ A â”‚â”€â”€â”€â–¶â”‚ A â”‚â”€â”€â”€â–¶â”‚ O â”‚         â”‚
â”‚  â””â”€â”€â”€â”˜    â””â”€â”€â”€â”˜    â””â”€â”€â”€â”˜    â””â”€â”€â”€â”˜         â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Description                                â”‚
â”‚  Automatically triage incoming emails,      â”‚
â”‚  flag important messages, and draft         â”‚
â”‚  replies for your approval.                 â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Requires: Email Agent, Drafting Agent      â”‚
â”‚  Estimated setup time: 5 minutes            â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Use This Template           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Card Components:**
1. **Icon + Title** â€” Template identifier
2. **Visual Preview** â€” Mini workflow graph
3. **Description** â€” What the workflow does
4. **Requirements** â€” Required agents/tools
5. **Setup Time** â€” Estimated configuration time
6. **Use Template Button** â€” Primary CTA

### Use Template Flow:

**Step 1: Select Template**
- User browses templates
- Taps "Use Template"

**Step 2: Template Preview**
- Full-screen preview of workflow
- Explanation of each node
- Required setup steps highlighted
- "Continue" button

**Step 3: Configuration**
- Step-by-step configuration wizard:
  - Select/configure agents
  - Set up triggers (webhook URLs, schedules)
  - Configure outputs
  - Set permissions

**Step 4: Name & Save**
- Name the workflow
- Save to workflow list
- Option to run immediately

### Template Customization:

**After Using Template:**
- Workflow opens in builder (UC-5.1)
- All nodes pre-connected
- User can:
  - Add/remove nodes
  - Change agents
  - Modify conditions
  - Add new branches
  - Customize output

### Template Categories:

**Category Filtering:**
- All Templates
- ğŸ“§ Email & Communication
- ğŸ“… Scheduling & Calendar
- ğŸ” Research & Analysis
- ğŸ’» Development & Code
- ğŸ“Š Data Processing
- ğŸ¤ Collaboration
- ğŸ“ Content Creation

### Template Details Screen:

When tapping template card (before "Use"):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Email Triage Template           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  [Large workflow preview]           â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ T â”‚â”€â”€â–¶â”‚ A â”‚â”€â”€â–¶â”‚ O â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  What this workflow does:           â”‚
â”‚  â€¢ Monitors your inbox              â”‚
â”‚  â€¢ Classifies incoming emails       â”‚
â”‚  â€¢ Drafts replies for important     â”‚
â”‚    messages                         â”‚
â”‚  â€¢ Waits for your approval          â”‚
â”‚  â€¢ Sends approved replies           â”‚
â”‚                                     â”‚
â”‚  Required Setup:                    â”‚
â”‚  â˜‘ Email Agent (create or select)   â”‚
â”‚  â˜‘ Email account connection         â”‚
â”‚  â˜ Approval preferences             â”‚
â”‚                                     â”‚
â”‚  Estimated time: 5 minutes          â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    Use This Template     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State Management:

**Template Storage:**
- Templates stored as workflow JSON
- Include metadata: category, description, requirements
- Version tracking for updates

**User Templates:**
- Users can save their workflows as templates
- Private (for self) or shared (community)
- Template export feature

## ZFA Architecture Requirements

### Entity Definition

**WorkflowTemplate Entity:**
```bash
zfa entity create -n WorkflowTemplate --field "id:String,name:String,description:String,category:String,tags:List<String>,nodes:List<Map<String,dynamic>>,connections:List<Map<String,dynamic>>,includeAgents:bool,previewImage:String?,authorId:String?,authorName:String?,rating:double,downloadCount:int,isCurated:bool,createdAt:DateTime" --json
```

### Clean Architecture Generation

```bash
zfa generate WorkflowTemplate --methods=get,getList,create --data --vpc --state
```

### Implementation Notes

1. **Bundled Templates**: Store curated templates in local data source
2. **Community Sync**: Fetch community templates from API
3. **Use Template**: Copy template config to new `Workflow` entity

